<!DOCTYPE html>
<html lang="zh"><meta charset="utf-8"><meta name="generator" content="Hugo 0.83.1" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name="color-scheme" content="light dark">
<meta name="supported-color-schemes" content="light dark"><title>VPS连接 Google Drive&nbsp;&ndash;&nbsp;蜀山小筑</title><link rel="stylesheet" href="/css/core.min.2b84579068bd8ec3d1cd26c1d4177c5a85fee2eba66d7cd5aa289e9b7aef0a612b119e4bc14d850c83d270f4b192374c.css" integrity="sha384-K4RXkGi9jsPRzSbB1Bd8WoX&#43;4uumbXzVqiiem3rvCmErEZ5LwU2FDIPScPSxkjdM"><meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="VPS连接 Google Drive" /><body><section id="header">
    <div class="header wrap"><span class="header left-side"><a class="site home" href="/"><img class="site logo" src="/img/logo.png" alt /><span class="site name">蜀山小筑</span></a></span>
        <span class="header right-side"><div class="nav wrap"><nav class="nav"><a class="nav item" href="/">主页</a><a class="nav item" href="/tags">标签</a><a class="nav item" href="/categories">分类</a><a class="nav item" href="/about">关于我</a></nav></div></span></div><div class="site slogan"><span class="title">「少即多,慢则快」</span></div></section><section id="content"><div class="article-container"><section class="article header">
    <h1 class="article title">VPS连接 Google Drive</h1><p class="article date">Saturday, November 30, 2019</p></section><article class="article markdown-body"><p>有人已经写的挺好了，我为啥还要写？</p>
<p><a href="https://sunpma.com/567.html"target="_blank" rel="noopener noreferrer">去教程</a>
!</p>
<h2 id="一前言">一、前言</h2>
<p>如果那个教程没有了，该怎么办？还是备份一下吧，照抄！重新排版！</p>
<h2 id="二必要条件">二、必要条件</h2>
<p>这个应该是 Ubuntu/Debian 系统比较实用，别的系统命令有细微差别。</p>
<h2 id="三rclone">三、rclone</h2>
<h3 id="1安装-rclone">1.安装 rclone</h3>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">curl https://rclone.org/install.sh <span class="p">|</span> sudo bash
</code></pre></div><h3 id="2开始配置">2.开始配置</h3>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">rclone config
</code></pre></div><h3 id="3详细配置">3.详细配置</h3>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">n<span class="o">)</span> New remote
s<span class="o">)</span> Set configuration password
q<span class="o">)</span> Quit config
n/s/q&gt; n   <span class="c1">#输入n回车，新建配置</span>
name&gt; GD   <span class="c1">#新建配置的名称，随意填写，后面会用到</span>
Type of storage to configure.
Enter a string value. Press Enter <span class="k">for</span> the default <span class="o">(</span><span class="s2">&#34;&#34;</span><span class="o">)</span>.
Choose a number from below, or <span class="nb">type</span> in your own value
 <span class="m">1</span> / 1Fichier
   <span class="se">\ </span><span class="s2">&#34;fichier&#34;</span>
 <span class="m">2</span> / Alias <span class="k">for</span> an existing remote
   <span class="se">\ </span><span class="s2">&#34;alias&#34;</span>
 <span class="m">3</span> / Amazon Drive
   <span class="se">\ </span><span class="s2">&#34;amazon cloud drive&#34;</span>
 <span class="m">4</span> / Amazon S3 Compliant Storage Provider <span class="o">(</span>AWS, Alibaba, Ceph, Digital Ocean, Dreamhost, IBM COS, Minio, etc<span class="o">)</span>
   <span class="se">\ </span><span class="s2">&#34;s3&#34;</span>
 <span class="m">5</span> / Backblaze B2
   <span class="se">\ </span><span class="s2">&#34;b2&#34;</span>
 <span class="m">6</span> / Box
   <span class="se">\ </span><span class="s2">&#34;box&#34;</span>
 <span class="m">7</span> / Cache a remote
   <span class="se">\ </span><span class="s2">&#34;cache&#34;</span>
 <span class="m">8</span> / Dropbox
   <span class="se">\ </span><span class="s2">&#34;dropbox&#34;</span>
 <span class="m">9</span> / Encrypt/Decrypt a remote
   <span class="se">\ </span><span class="s2">&#34;crypt&#34;</span>
<span class="m">10</span> / FTP Connection
   <span class="se">\ </span><span class="s2">&#34;ftp&#34;</span>
<span class="m">11</span> / Google Cloud Storage <span class="o">(</span>this is not Google Drive<span class="o">)</span>
   <span class="se">\ </span><span class="s2">&#34;google cloud storage&#34;</span>
<span class="m">12</span> / Google Drive
   <span class="se">\ </span><span class="s2">&#34;drive&#34;</span>
<span class="m">13</span> / Google Photos
   <span class="se">\ </span><span class="s2">&#34;google photos&#34;</span>
<span class="m">14</span> / Hubic
   <span class="se">\ </span><span class="s2">&#34;hubic&#34;</span>
<span class="m">15</span> / JottaCloud
   <span class="se">\ </span><span class="s2">&#34;jottacloud&#34;</span>
<span class="m">16</span> / Koofr
   <span class="se">\ </span><span class="s2">&#34;koofr&#34;</span>
<span class="m">17</span> / Local Disk
   <span class="se">\ </span><span class="s2">&#34;local&#34;</span>
<span class="m">18</span> / Mega
   <span class="se">\ </span><span class="s2">&#34;mega&#34;</span>
<span class="m">19</span> / Microsoft Azure Blob Storage
   <span class="se">\ </span><span class="s2">&#34;azureblob&#34;</span>
<span class="m">20</span> / Microsoft OneDrive
   <span class="se">\ </span><span class="s2">&#34;onedrive&#34;</span>
<span class="m">21</span> / OpenDrive
   <span class="se">\ </span><span class="s2">&#34;opendrive&#34;</span>
<span class="m">22</span> / Openstack Swift <span class="o">(</span>Rackspace Cloud Files, Memset Memstore, OVH<span class="o">)</span>
   <span class="se">\ </span><span class="s2">&#34;swift&#34;</span>
<span class="m">23</span> / Pcloud
   <span class="se">\ </span><span class="s2">&#34;pcloud&#34;</span>
<span class="m">24</span> / Put.io
   <span class="se">\ </span><span class="s2">&#34;putio&#34;</span>
<span class="m">25</span> / QingCloud Object Storage
   <span class="se">\ </span><span class="s2">&#34;qingstor&#34;</span>
<span class="m">26</span> / SSH/SFTP Connection
   <span class="se">\ </span><span class="s2">&#34;sftp&#34;</span>
<span class="m">27</span> / Union merges the contents of several remotes
   <span class="se">\ </span><span class="s2">&#34;union&#34;</span>
<span class="m">28</span> / Webdav
   <span class="se">\ </span><span class="s2">&#34;webdav&#34;</span>
<span class="m">29</span> / Yandex Disk
   <span class="se">\ </span><span class="s2">&#34;yandex&#34;</span>
<span class="m">30</span> / http Connection
   <span class="se">\ </span><span class="s2">&#34;http&#34;</span>
<span class="m">31</span> / premiumize.me
   <span class="se">\ </span><span class="s2">&#34;premiumizeme&#34;</span>
Storage&gt; <span class="m">12</span>       <span class="c1">#选择需要挂载的网盘</span>
** See <span class="nb">help</span> <span class="k">for</span> drive backend at: https://rclone.org/drive/ **

Google Application Client Id
Setting your own is recommended.
See https://rclone.org/drive/#making-your-own-client-id <span class="k">for</span> how to create your own.
If you leave this blank, it will use an internal key which is low performance.
Enter a string value. Press Enter <span class="k">for</span> the default <span class="o">(</span><span class="s2">&#34;&#34;</span><span class="o">)</span>.
client_id&gt;        <span class="c1">#默认直接回车，或者输入自己的OAuth ID</span>
Google Application Client Secret
Setting your own is recommended.
Enter a string value. Press Enter <span class="k">for</span> the default <span class="o">(</span><span class="s2">&#34;&#34;</span><span class="o">)</span>.
client_secret&gt;    <span class="c1">#默认直接回车，或者输入自己的OAuth秘锁</span>
Scope that rclone should use when requesting access from drive.
Enter a string value. Press Enter <span class="k">for</span> the default <span class="o">(</span><span class="s2">&#34;&#34;</span><span class="o">)</span>.
Choose a number from below, or <span class="nb">type</span> in your own value
 <span class="m">1</span> / Full access all files, excluding Application Data Folder.
   <span class="se">\ </span><span class="s2">&#34;drive&#34;</span>
 <span class="m">2</span> / Read-only access to file metadata and file contents.
   <span class="se">\ </span><span class="s2">&#34;drive.readonly&#34;</span>
   / Access to files created by rclone only.
 <span class="m">3</span> <span class="p">|</span> These are visible in the drive website.
   <span class="p">|</span> File authorization is revoked when the user deauthorizes the app.
   <span class="se">\ </span><span class="s2">&#34;drive.file&#34;</span>
   / Allows <span class="nb">read</span> and write access to the Application Data folder.
 <span class="m">4</span> <span class="p">|</span> This is not visible in the drive website.
   <span class="se">\ </span><span class="s2">&#34;drive.appfolder&#34;</span>
   / Allows read-only access to file metadata but
 <span class="m">5</span> <span class="p">|</span> does not allow any access to <span class="nb">read</span> or download file content.
   <span class="se">\ </span><span class="s2">&#34;drive.metadata.readonly&#34;</span>
scope&gt; <span class="m">1</span>          <span class="c1">#默认输入1回车</span>
ID of the root folder
Leave blank normally.
Fill in to access <span class="s2">&#34;Computers&#34;</span> folders. <span class="o">(</span>see docs<span class="o">)</span>.
Enter a string value. Press Enter <span class="k">for</span> the default <span class="o">(</span><span class="s2">&#34;&#34;</span><span class="o">)</span>.
root_folder_id&gt;  <span class="c1">#默认直接回车</span>
Service Account Credentials JSON file path 
Leave blank normally.
Needed only <span class="k">if</span> you want use SA instead of interactive login.
Enter a string value. Press Enter <span class="k">for</span> the default <span class="o">(</span><span class="s2">&#34;&#34;</span><span class="o">)</span>.
service_account_file&gt; 
Edit advanced config? <span class="o">(</span>y/n<span class="o">)</span>
y<span class="o">)</span> Yes
n<span class="o">)</span> No
y/n&gt; n           <span class="c1">#是否编辑高级配置，输入n回车</span>
Remote config
Use auto config?
 * Say Y <span class="k">if</span> not sure
 * Say N <span class="k">if</span> you are working on a remote or headless machine
y<span class="o">)</span> Yes
n<span class="o">)</span> No
y/n&gt; n          <span class="c1">#是否使用自动配置，输入n回车</span>
If your browser doesn<span class="err">&#39;</span>t open automatically go to the following link: https://accounts.google.com/o/oauth2/XXX
Log in and authorize rclone <span class="k">for</span> access
Enter verification code&gt; XXXX  <span class="c1">#复制上面的链接在浏览器中打开，将得到的授权码复制到这里后回车</span>
Configure this as a team drive?
y<span class="o">)</span> Yes
n<span class="o">)</span> No
y/n&gt; y          <span class="c1">#是否挂载团队网盘，如果没有输入n回车，需要挂载团队版输入y回车</span>
Fetching team drive list...
Choose a number from below, or <span class="nb">type</span> in your own value
 <span class="m">1</span> / SunPma
   <span class="se">\ </span><span class="s2">&#34;0ADYACmKjlU3JUk9PVA&#34;</span>
Enter a Team Drive ID&gt; <span class="m">1</span>      <span class="c1">#选择你需要挂载的团队盘然后回车</span>
--------------------
<span class="o">[</span>SUNPMAGD<span class="o">]</span>
<span class="nb">type</span> <span class="o">=</span> drive
<span class="nv">scope</span> <span class="o">=</span> drive
<span class="nv">token</span> <span class="o">=</span> <span class="o">{</span><span class="s2">&#34;access_token&#34;</span>:<span class="s2">&#34;XXX&#34;</span>,<span class="s2">&#34;expiry&#34;</span>:<span class="s2">&#34;2019-10-23T14:32:06.481207275+08:00&#34;</span><span class="o">}</span>
<span class="nv">team_drive</span> <span class="o">=</span> 0ADYACmKjlU3JUk9PVA
--------------------
y<span class="o">)</span> Yes this is OK
e<span class="o">)</span> Edit this remote
d<span class="o">)</span> Delete this remote
y/e/d&gt; y       <span class="c1">#默认输入y回车</span>
Current remotes:

Name                 <span class="nv">Type</span>
<span class="o">====</span>                 <span class="o">====</span>
SUNPMAGD             drive

e<span class="o">)</span> Edit existing remote
n<span class="o">)</span> New remote
d<span class="o">)</span> Delete remote
r<span class="o">)</span> Rename remote
c<span class="o">)</span> Copy remote
s<span class="o">)</span> Set configuration password
q<span class="o">)</span> Quit config
e/n/d/r/c/s/q&gt; q   <span class="c1">#输入q回车，保存配置退出</span>
</code></pre></div><h3 id="4新建本地挂载文件夹">4.新建本地挂载文件夹</h3>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">cd</span> /root
mkdir emby
mkdir emby/config
mkdir rclone
mkdir rclone/ldfdsa00
</code></pre></div><pre><code>#/usr/bin/rclone mount DriveName:Folder LocalFolder \
下面整体代码中最上面的这条需要自己修改，不要直接复制，注意代码中有空格        
DriveName    #配置时填写的name    
Folder       #网盘里要挂载的文件夹名    
LocalFolder  #本地要挂载的文件夹绝对路径    
例：/usr/bin/rclone mount GD:VPS /home/GoogleDrive \
</code></pre><h3 id="5挂载">5.挂载</h3>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">rclone mount ldfdsa00: /root/rclone/ldfdsa00  --buffer-size 1G --vfs-read-chunk-size 256M --vfs-read-chunk-size-limit 2G  --allow-non-empty --allow-other   --dir-cache-time 12h  &gt;/dev/null 2&gt;<span class="p">&amp;</span><span class="m">1</span> <span class="p">&amp;</span>
</code></pre></div><h3 id="6开机自动启动">6.开机自动启动</h3>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">nano /etc/crontab
@reboot root  rclone mount ldfdsa00: /root/rclone/ldfdsa00  --buffer-size 1G --vfs-read-chunk-size 256M --vfs-read-chunk-size-limit 2G  --allow-non-empty --allow-other   --dir-cache-time 12h  &gt;/dev/null 2&gt;<span class="p">&amp;</span><span class="m">1</span> <span class="p">&amp;</span>
</code></pre></div><h3 id="61重新挂在">6.1重新挂在</h3>
<p>如果有问题，可以选择重新挂在</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">umount /root/rclone/ldfdsa00 <span class="c1">#卸载源目录</span>
rclone mount gd（换成新账号，内部目录要匹配）: /root/rclone/ldfdsa00  --buffer-size 1G --vfs-read-chunk-size 256M --vfs-read-chunk-size-limit 2G  --allow-non-empty --allow-other   --dir-cache-time 12h  &gt;/dev/null 2&gt;<span class="p">&amp;</span><span class="m">1</span> <span class="p">&amp;</span>      <span class="c1">#重新挂载</span>
</code></pre></div><hr>
<p>[参考1]<a href="https://wzfou.com/rclone-cos-fuse-ossfs/">https://wzfou.com/rclone-cos-fuse-ossfs/</a><br>
[参考2]<a href="https://sunpma.com/567.html">https://sunpma.com/567.html</a><br>
[参考3]<a href="http://dxz.plus/index.php/2019/11/03/10.html">http://dxz.plus/index.php/2019/11/03/10.html</a></p>
</article><section class="article license">版权声明：如果转发请带上本文链接和注明来源。</section><section class="article author"><img class="avatar" src="/img/avatar.jpg" alt><p class="name">愚道</p><div class="bio">求知若渴，虚心若愚</div><div class="details"><a class="item" href="https://github.com/YALEAX" target="_blank" rel="noopener noreferrer"><span class="iconfont icon-github"></span>&nbsp;YALEAX</a><a class="item" href="mailto:Qu@JzE.us" target="_blank" rel="noopener noreferrer"><span class="iconfont icon-email"></span>&nbsp;Qu@JzE.us</a></div>
</section>
</div>
<div class="article bottom"><section class="article navigation"><p><a class="link" href="/post/n1%E7%9B%92%E5%AD%90%E5%AE%89%E8%A3%85-armbian-5-99-%E5%B9%B6%E5%AE%89%E8%A3%85-de_gwd/"><span class="iconfont icon-article"></span>N1盒子Armbian 5.98,安装 De_gwd，最快速的科学上网方案。</a></p><p><a class="link" href="/post/%E4%BD%BF%E7%94%A8-certbot%E6%89%8B%E5%8A%A8%E8%8E%B7%E5%8F%96-lets-encrypt-%E5%85%8D%E8%B4%B9%E8%AF%81%E4%B9%A6caddy%E6%89%8B%E5%8A%A8%E9%85%8D%E7%BD%AE%E8%AF%81%E4%B9%A6/"><span class="iconfont icon-article"></span>使用 Certbot手动获取 Let's Encrypt 免费证书Caddy手动配置证书</a></p></section></div></section><section id="footer"><div class="footer-wrap">
    <p class="copyright">©2021 蜀山小筑.</p>
    <p class="powerby"><span>Powered&nbsp;by&nbsp;</span><a href="https://gohugo.io" 
        target="_blank" rel="noopener noreferrer">Hugo</a><span>&nbsp;&amp;&nbsp;</span><a href="https://themes.gohugo.io/hugo-notepadium/" 
        target="_blank" rel="noopener noreferrer">Notepadium</a></p></div>
</section><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/&#43;DiW/UqRcLbRjq" crossorigin="anonymous"><script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l&#43;B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd&#43;qj&#43;o24G5ZU2zJz" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
            onload="renderMathInElement(document.body);"></script></body>

</html>